# Visual Diagrams and Flowcharts Reference

## Table of Contents
1. [System Architecture Diagrams](#system-architecture-diagrams)
2. [Quantum Circuit Diagrams](#quantum-circuit-diagrams)
3. [Attack and Defense Flowcharts](#attack-and-defense-flowcharts)
4. [Data Flow Diagrams](#data-flow-diagrams)
5. [Results Visualizations](#results-visualizations)

---

## System Architecture Diagrams

### Complete System Overview

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                    QUANTUM FEDERATED LEARNING SYSTEM                         │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌──────────────────────────────────────────────────────────────────────┐  │
│  │                         CENTRAL SERVER                                │  │
│  │  ┌────────────────────────────────────────────────────────────────┐  │  │
│  │  │  Defense Layer                                                  │  │  │
│  │  │  - Norm-based filtering (median × 3.0)                         │  │  │
│  │  │  - Post-quantum crypto (Kyber512 + Dilithium2)                │  │  │
│  │  │  - Client fingerprinting                                       │  │  │
│  │  └────────────────────────────────────────────────────────────────┘  │  │
│  │                              ▲                                        │  │
│  │                              │ Updates                               │  │
│  │                              │                                        │  │
│  │  ┌────────────────────────────────────────────────────────────────┐  │  │
│  │  │  Aggregation (FedAvg)                                          │  │  │
│  │  │  θ_global(t+1) = θ_global(t) + (1/K) Σ Δθ_k                   │  │  │
│  │  └────────────────────────────────────────────────────────────────┘  │  │
│  │                              │                                        │  │
│  │                              │ Global Model                          │  │
│  │                              ▼                                        │  │
│  └──────────────────────────────┬───────────────────────────────────────┘  │
│                                  │                                          │
│              ┌───────────────────┼───────────────────┬──────────────┐      │
│              │                   │                   │              │      │
│         ┌────▼────┐         ┌────▼────┐         ┌────▼────┐   ┌────▼────┐ │
│         │Client 0 │         │Client 1 │         │Client 2 │   │Client 3 │ │
│         │⚠️ MAL   │         │✓ HONEST │         │✓ HONEST │   │✓ HONEST │ │
│         └────┬────┘         └────┬────┘         └────┬────┘   └────┬────┘ │
│              │                   │                   │              │      │
│              ▼                   ▼                   ▼              ▼      │
│  ┌──────────────────────────────────────────────────────────────────────┐  │
│  │              HYBRID QUANTUM-CLASSICAL NEURAL NETWORK                 │  │
│  │                                                                       │  │
│  │  ┌─────────────┐    ┌──────────────┐    ┌─────────────────┐        │  │
│  │  │ Classical   │ → │   Quantum     │ → │   Classical      │        │  │
│  │  │ CNN         │    │   Circuit     │    │   Classifier    │        │  │
│  │  │ (256 feat)  │    │   (4 qubits)  │    │   (10 classes)  │        │  │
│  │  └─────────────┘    └──────────────┘    └─────────────────┘        │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│              │                   │                   │              │      │
│              ▼                   ▼                   ▼              ▼      │
│  ┌──────────────────────────────────────────────────────────────────────┐  │
│  │                      NON-IID DATA DISTRIBUTION                        │  │
│  │              Dirichlet(α=1.5) - Moderate Heterogeneity               │  │
│  │                                                                       │  │
│  │  Client 0: [0:800, 1:200, 2:600, ...]  (4,200 samples)              │  │
│  │  Client 1: [0:200, 1:800, 2:300, ...]  (4,500 samples)              │  │
│  │  Client 2: [0:500, 1:400, 2:900, ...]  (4,800 samples)              │  │
│  │  Client 3: [0:600, 1:700, 2:200, ...]  (4,500 samples)              │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────────┘
```

### Three-Week Experimental Progression

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        EXPERIMENTAL WORKFLOW                                 │
├─────────────────────────────────────────────────────────────────────────────┤

                        WEEK 1: BASELINE
        ┌──────────────────────────────────────────────┐
        │  All Clients Honest (100%)                   │
        │  No Byzantine Attacks                         │
        │  Standard FedAvg Aggregation                  │
        │                                               │
        │  Result: 88.9% Accuracy ✓                    │
        │  Purpose: Upper Bound Establishment           │
        └──────────────────────────────────────────────┘
                            │
                            ▼
                     INTRODUCE ATTACK
                            │
                            ▼
                        WEEK 2: ATTACK
        ┌──────────────────────────────────────────────┐
        │  25% Malicious Clients (1 out of 4)          │
        │  Gradient Ascent Attack (scale=10.0)         │
        │  No Defense Mechanisms                        │
        │                                               │
        │  Result: 11.2% Accuracy ✗                    │
        │  Purpose: Demonstrate Vulnerability           │
        └──────────────────────────────────────────────┘
                            │
                            ▼
                     INTRODUCE DEFENSE
                            │
                            ▼
                     WEEK 6: FULL DEFENSE
        ┌──────────────────────────────────────────────┐
        │  25% Malicious Clients (1 out of 4)          │
        │  Gradient Ascent Attack (scale=10.0)         │
        │  Norm-Based Filtering Defense                 │
        │                                               │
        │  Result: 85.4% Accuracy ✓                    │
        │  Purpose: Validate Defense Effectiveness      │
        └──────────────────────────────────────────────┘
                            │
                            ▼
                    COMPARE AND ANALYZE
        ┌──────────────────────────────────────────────┐
        │  Accuracy Recovery: 96.1%                     │
        │  Detection Precision: 100%                    │
        │  Detection Recall: 100%                       │
        │  Computational Overhead: 5.3%                 │
        └──────────────────────────────────────────────┘
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## Quantum Circuit Diagrams

### Complete Quantum Circuit Architecture

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                    QUANTUM CIRCUIT (4 qubits, 4 layers)                      │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  INPUT: Classical features [θ₀, θ₁, θ₂, θ₃] ∈ [-π, π]                      │
│                                                                              │
│  INITIAL STATE: |ψ₀⟩ = |0000⟩                                               │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │  ENCODING LAYER (Angle Encoding)                                       │ │
│  ├────────────────────────────────────────────────────────────────────────┤ │
│  │                                                                         │ │
│  │  Qubit 0:  |0⟩──RY(θ₀)──────────────────────────────────────────────  │ │
│  │                                                                         │ │
│  │  Qubit 1:  |0⟩──RY(θ₁)──────────────────────────────────────────────  │ │
│  │                                                                         │ │
│  │  Qubit 2:  |0⟩──RY(θ₂)──────────────────────────────────────────────  │ │
│  │                                                                         │ │
│  │  Qubit 3:  |0⟩──RY(θ₃)──────────────────────────────────────────────  │ │
│  │                                                                         │ │
│  │  Output: |ψ₁⟩ = Σᵢ αᵢ|i⟩  (superposition of 2⁴=16 states)             │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                                  │                                           │
│                                  ▼                                           │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │  VARIATIONAL LAYER 1 (Trainable)                                       │ │
│  ├────────────────────────────────────────────────────────────────────────┤ │
│  │                                                                         │ │
│  │  Qubit 0:  ──RY(w₀,₀,₀)──RZ(w₀,₀,₁)──╭●────────────────────────────  │ │
│  │                                        │                                │ │
│  │  Qubit 1:  ──RY(w₀,₁,₀)──RZ(w₀,₁,₁)──╰X──╭●──────────────────────────  │ │
│  │                                            │                            │ │
│  │  Qubit 2:  ──RY(w₀,₂,₀)──RZ(w₀,₂,₁)──────╰X──╭●────────────────────  │ │
│  │                                                │                        │ │
│  │  Qubit 3:  ──RY(w₀,₃,₀)──RZ(w₀,₃,₁)──────────╰X──╭●──────────────────  │ │
│  │                                                    │                    │ │
│  │  Qubit 0:  ────────────────────────────────────────╰X──────────────────  │ │
│  │           (CNOT ring: entangles all qubits)                            │ │
│  │                                                                         │ │
│  │  Parameters per layer: 4 qubits × 2 angles = 8 parameters             │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                                  │                                           │
│                                  ▼                                           │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │  VARIATIONAL LAYERS 2, 3, 4                                            │ │
│  │  (Same structure as Layer 1)                                           │ │
│  │                                                                         │ │
│  │  Total trainable parameters: 4 layers × 8 params = 32 parameters      │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                                  │                                           │
│                                  ▼                                           │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │  MEASUREMENT LAYER (Pauli-Z Expectation)                               │ │
│  ├────────────────────────────────────────────────────────────────────────┤ │
│  │                                                                         │ │
│  │  Qubit 0:  ──⟨Z₀⟩──  →  m₀ ∈ [-1, +1]                                 │ │
│  │                                                                         │ │
│  │  Qubit 1:  ──⟨Z₁⟩──  →  m₁ ∈ [-1, +1]                                 │ │
│  │                                                                         │ │
│  │  Qubit 2:  ──⟨Z₂⟩──  →  m₂ ∈ [-1, +1]                                 │ │
│  │                                                                         │ │
│  │  Qubit 3:  ──⟨Z₃⟩──  →  m₃ ∈ [-1, +1]                                 │ │
│  │                                                                         │ │
│  │  Output: [m₀, m₁, m₂, m₃] = 4D quantum feature vector                 │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  TOTAL CIRCUIT DEPTH: ~13 (1 encoding + 4×3 variational)                   │
│  TOTAL GATES: ~52 (4 RY + 4×12 variational gates)                          │
│  BACKEND: PennyLane default.qubit (simulator)                               │
└─────────────────────────────────────────────────────────────────────────────┘
```

### Gate-Level Detail

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         QUANTUM GATES EXPLAINED                              │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  RY Gate (Y-Rotation):                                                       │
│  ┌──────────────────────────┐                                               │
│  │  RY(θ) = exp(-iθY/2)     │                                               │
│  │                           │                                               │
│  │       [cos(θ/2)  -sin(θ/2)]                                              │
│  │     = [sin(θ/2)   cos(θ/2)]                                              │
│  │                           │                                               │
│  │  Effect: |0⟩ → cos(θ/2)|0⟩ + sin(θ/2)|1⟩                                │
│  │          |1⟩ → -sin(θ/2)|0⟩ + cos(θ/2)|1⟩                               │
│  └──────────────────────────┘                                               │
│                                                                              │
│  RZ Gate (Z-Rotation):                                                       │
│  ┌──────────────────────────┐                                               │
│  │  RZ(φ) = exp(-iφZ/2)     │                                               │
│  │                           │                                               │
│  │       [e^(-iφ/2)      0     ]                                            │
│  │     = [    0      e^(iφ/2)  ]                                            │
│  │                           │                                               │
│  │  Effect: Changes phase between |0⟩ and |1⟩                              │
│  └──────────────────────────┘                                               │
│                                                                              │
│  CNOT Gate (Controlled-NOT):                                                 │
│  ┌──────────────────────────┐                                               │
│  │  Control: ●              │                                               │
│  │  Target:  X              │                                               │
│  │                           │                                               │
│  │       [1  0  0  0]        │                                              │
│  │       [0  1  0  0]        │                                              │
│  │     = [0  0  0  1]        │                                              │
│  │       [0  0  1  0]        │                                              │
│  │                           │                                               │
│  │  Effect: |c⟩|t⟩ → |c⟩|t⊕c⟩  (XOR operation)                            │
│  │          Creates entanglement!                                           │
│  └──────────────────────────┘                                               │
│                                                                              │
│  Pauli-Z Observable:                                                         │
│  ┌──────────────────────────┐                                               │
│  │  Z = [1   0 ]            │                                               │
│  │      [0  -1 ]            │                                               │
│  │                           │                                               │
│  │  ⟨Z⟩ = P(|0⟩) - P(|1⟩)   │                                               │
│  │                           │                                               │
│  │  +1: Definitely |0⟩       │                                               │
│  │   0: Equal superposition  │                                               │
│  │  -1: Definitely |1⟩       │                                               │
│  └──────────────────────────┘                                               │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## Attack and Defense Flowcharts

### Attack Workflow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                     GRADIENT ASCENT ATTACK WORKFLOW                          │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌──────────────────────┐                                                   │
│  │  Round t begins      │                                                   │
│  └──────────┬───────────┘                                                   │
│             │                                                                │
│             ▼                                                                │
│  ┌──────────────────────────────────────┐                                   │
│  │ Server broadcasts global model       │                                   │
│  │ θ_global(t)                          │                                   │
│  └──────────┬───────────────────────────┘                                   │
│             │                                                                │
│  ┌──────────┴────────────┐                                                  │
│  │                       │                                                  │
│  ▼                       ▼                                                  │
│ ┌─────────────────┐   ┌─────────────────────────┐                          │
│ │ HONEST CLIENT   │   │ MALICIOUS CLIENT        │                          │
│ ├─────────────────┤   ├─────────────────────────┤                          │
│ │                 │   │                         │                          │
│ │ 1. Receive θ    │   │ 1. Receive θ_global     │                          │
│ │ 2. Train:       │   │ 2. Store θ_old          │                          │
│ │    for epoch:   │   │ 3. Train HONESTLY:      │                          │
│ │      forward    │   │    for epoch:           │                          │
│ │      backward   │   │      forward            │                          │
│ │      update     │   │      backward           │                          │
│ │ 3. θ_new        │   │      update             │                          │
│ │ 4. Δθ = θ_new   │   │ 4. θ_trained            │                          │
│ │    - θ_global   │   │                         │                          │
│ │ 5. Send Δθ ✓    │   │ ⚠️  ATTACK BEGINS       │                          │
│ │                 │   │ 5. Δθ_honest =          │                          │
│ │                 │   │    θ_trained - θ_old    │                          │
│ │                 │   │ 6. REVERSE & AMPLIFY:   │                          │
│ │                 │   │    Δθ_poison =          │                          │
│ │                 │   │    -10 × Δθ_honest      │                          │
│ │                 │   │ 7. θ_poison =           │                          │
│ │                 │   │    θ_old + Δθ_poison    │                          │
│ │                 │   │ 8. Send θ_poison ⚠️      │                          │
│ │                 │   │                         │                          │
│ │ Norm: ~0.1      │   │ Norm: ~1.0-1.5 (10×!)   │                          │
│ └─────────┬───────┘   └──────────┬──────────────┘                          │
│           │                      │                                          │
│           └──────────┬───────────┘                                          │
│                      │                                                       │
│                      ▼                                                       │
│           ┌──────────────────────┐                                          │
│           │ Server receives:     │                                          │
│           │ - 3 honest updates   │                                          │
│           │ - 1 poisoned update  │                                          │
│           └──────────┬───────────┘                                          │
│                      │                                                       │
│          ┌───────────┴────────────┐                                         │
│          │                        │                                         │
│          ▼                        ▼                                         │
│    ┌──────────┐           ┌──────────────┐                                 │
│    │ WEEK 2:  │           │ WEEK 6:      │                                 │
│    │ NO DEF   │           │ WITH DEF     │                                 │
│    ├──────────┤           ├──────────────┤                                 │
│    │ Aggregate│           │ Norm Filter  │                                 │
│    │ ALL      │           │ (See below)  │                                 │
│    │ updates  │           └──────┬───────┘                                 │
│    └────┬─────┘                  │                                         │
│         │                        ▼                                         │
│         │              ┌──────────────────┐                                │
│         │              │ Reject poisoned  │                                │
│         │              │ Aggregate honest │                                │
│         │              └────────┬─────────┘                                │
│         │                       │                                          │
│         ▼                       ▼                                          │
│    ┌──────────┐           ┌──────────────┐                                │
│    │ θ_global │           │ θ_global     │                                │
│    │ POISONED │           │ CLEAN ✓      │                                │
│    │ Acc: 11% │           │ Acc: 85%     │                                │
│    └──────────┘           └──────────────┘                                │
└─────────────────────────────────────────────────────────────────────────────┘
```

### Defense Workflow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                    NORM-BASED FILTERING DEFENSE                              │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  INPUT: Client updates {Δθ₁, Δθ₂, Δθ₃, Δθ₄}                                │
│                                                                              │
│  ┌──────────────────────────────────────────────────────────────────────┐  │
│  │  STEP 1: Calculate Norms                                             │  │
│  ├──────────────────────────────────────────────────────────────────────┤  │
│  │                                                                       │  │
│  │  For each client i:                                                  │  │
│  │    norm[i] = ||Δθᵢ||₂ = √(Σⱼ (Δθᵢ[j])²)                             │  │
│  │                                                                       │  │
│  │  Example:                                                             │  │
│  │    Client 1 (honest):    norm[1] = 0.042                            │  │
│  │    Client 2 (honest):    norm[2] = 0.038                            │  │
│  │    Client 3 (honest):    norm[3] = 0.045                            │  │
│  │    Client 4 (malicious): norm[4] = 1.234 ⚠️                          │  │
│  │                                                                       │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│                                  │                                          │
│                                  ▼                                          │
│  ┌──────────────────────────────────────────────────────────────────────┐  │
│  │  STEP 2: Calculate Statistics                                        │  │
│  ├──────────────────────────────────────────────────────────────────────┤  │
│  │                                                                       │  │
│  │  Sort norms: [0.038, 0.042, 0.045, 1.234]                           │  │
│  │                                                                       │  │
│  │  Calculate median:                                                    │  │
│  │    median = (0.042 + 0.045) / 2 = 0.0435                            │  │
│  │                                                                       │  │
│  │  Calculate threshold:                                                 │  │
│  │    threshold = 3.0 × 0.0435 = 0.1305                                │  │
│  │                                                                       │  │
│  │  Also calculate:                                                      │  │
│  │    min:  0.038                                                        │  │
│  │    max:  1.234                                                        │  │
│  │    mean: 0.340                                                        │  │
│  │    std:  0.562                                                        │  │
│  │                                                                       │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│                                  │                                          │
│                                  ▼                                          │
│  ┌──────────────────────────────────────────────────────────────────────┐  │
│  │  STEP 3: Filter Updates                                              │  │
│  ├──────────────────────────────────────────────────────────────────────┤  │
│  │                                                                       │  │
│  │  For each client i:                                                  │  │
│  │    If norm[i] ≤ threshold:                                           │  │
│  │      ✓ ACCEPT update                                                 │  │
│  │      Add to accepted_list                                            │  │
│  │    Else:                                                              │  │
│  │      ✗ REJECT update                                                 │  │
│  │      Add to rejected_list                                            │  │
│  │                                                                       │  │
│  │  Results:                                                             │  │
│  │    Client 1: 0.042 ≤ 0.1305 → ACCEPT ✓                              │  │
│  │    Client 2: 0.038 ≤ 0.1305 → ACCEPT ✓                              │  │
│  │    Client 3: 0.045 ≤ 0.1305 → ACCEPT ✓                              │  │
│  │    Client 4: 1.234 > 0.1305 → REJECT ✗                              │  │
│  │                                                                       │  │
│  │  Accepted: [1, 2, 3]                                                 │  │
│  │  Rejected: [4]                                                        │  │
│  │                                                                       │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│                                  │                                          │
│                                  ▼                                          │
│  ┌──────────────────────────────────────────────────────────────────────┐  │
│  │  STEP 4: Calculate Detection Metrics                                 │  │
│  ├──────────────────────────────────────────────────────────────────────┤  │
│  │                                                                       │  │
│  │  Ground truth: Client 4 is malicious                                 │  │
│  │                                                                       │  │
│  │  Confusion Matrix:                                                    │  │
│  │                 Predicted                                             │  │
│  │             Malicious  Honest                                         │  │
│  │  Actual Mal     1        0       ← TP=1, FN=0                        │  │
│  │         Hon     0        3       ← FP=0, TN=3                        │  │
│  │                                                                       │  │
│  │  Metrics:                                                             │  │
│  │    Precision = 1 / (1+0) = 100%  (no false positives!)              │  │
│  │    Recall    = 1 / (1+0) = 100%  (caught all malicious!)            │  │
│  │    F1-Score  = 2×1×1/(1+1) = 100%                                    │  │
│  │                                                                       │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│                                  │                                          │
│                                  ▼                                          │
│  ┌──────────────────────────────────────────────────────────────────────┐  │
│  │  STEP 5: Aggregate Accepted Updates (FedAvg)                         │  │
│  ├──────────────────────────────────────────────────────────────────────┤  │
│  │                                                                       │  │
│  │  θ_global(t+1) = θ_global(t) + (1/3)(Δθ₁ + Δθ₂ + Δθ₃)               │  │
│  │                                                                       │  │
│  │  Note: Only 3 clients aggregated (malicious excluded)                │  │
│  │                                                                       │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│  OUTPUT: Clean global model, Defense statistics                             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## Data Flow Diagrams

### Complete Training Round

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                   FEDERATED LEARNING ROUND (With Defense)                    │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  Time: t=0 (Start of Round r)                                               │
│  ┌──────────────────────────────────────────────────────────────────────┐  │
│  │  SERVER: Broadcast global model θ_global(r)                          │  │
│  │  Size: ~20 KB per client                                              │  │
│  │  Total communication: 4 × 20 KB = 80 KB                               │  │
│  └───────────────────────┬──────────────────────────────────────────────┘  │
│                          │                                                  │
│                          ├─────────────┬──────────────┬─────────────┐      │
│                          ▼             ▼              ▼             ▼      │
│  Time: t=1-120s      ┌────────┐   ┌────────┐    ┌────────┐   ┌────────┐  │
│  (Local Training)    │Client 1│   │Client 2│    │Client 3│   │Client 4│  │
│                      └────┬───┘   └────┬───┘    └────┬───┘   └────┬───┘  │
│                           │            │             │            │        │
│  ┌───────────────────────┼────────────┼─────────────┼────────────┤        │
│  │ PARALLEL LOCAL TRAINING                                                │ │
│  │                                                                         │ │
│  │ Each client:                                                            │ │
│  │ 1. Load local data (Non-IID subset)                                    │ │
│  │ 2. For epoch = 1 to 2:                                                 │ │
│  │      For each batch (128 samples):                                     │ │
│  │        a. Forward pass:                                                │ │
│  │           - Classical CNN (23.6s)                                      │ │
│  │           - Quantum circuit (88.9s) ← BOTTLENECK                      │ │
│  │           - Classical classifier (5.7s)                                │ │
│  │        b. Compute loss                                                 │ │
│  │        c. Backward pass:                                               │ │
│  │           - Classical gradients (24.3s)                                │ │
│  │           - Quantum gradients (92.9s) ← BOTTLENECK                    │ │
│  │        d. Update parameters                                            │ │
│  │ 3. Calculate update: Δθ = θ_new - θ_global                            │ │
│  │ 4. Calculate metrics: loss, accuracy, norm                             │ │
│  │ 5. IF MALICIOUS: Apply attack (Δθ → -10×Δθ)                           │ │
│  │                                                                         │ │
│  │ Time: ~120s per client (parallel)                                      │ │
│  └─────────────────────────────────────────────────────────────────────────┘ │
│                           │            │             │            │        │
│                           ▼            ▼             ▼            ▼        │
│  Time: t=120s        ┌────────────────────────────────────────────────┐   │
│  (Upload)            │ CLIENT UPDATES:                                │   │
│                      │ - Δθ₁ (norm=0.042, honest)                     │   │
│                      │ - Δθ₂ (norm=0.038, honest)                     │   │
│                      │ - Δθ₃ (norm=0.045, honest)                     │   │
│                      │ - Δθ₄ (norm=1.234, POISONED)                   │   │
│                      │ - Metrics for each                              │   │
│                      │                                                 │   │
│                      │ Size: 4 × (20 KB + 1 KB) = 84 KB              │   │
│                      └────────────────┬───────────────────────────────┘   │
│                                       │                                    │
│                                       ▼                                    │
│  Time: t=121-133s    ┌────────────────────────────────────────────────┐   │
│  (Defense)           │ SERVER: Apply Defense                          │   │
│                      ├────────────────────────────────────────────────┤   │
│                      │                                                 │   │
│                      │ 1. Calculate norms: [0.042, 0.038, 0.045, 1.234]│  │
│                      │ 2. Median: 0.0435                              │   │
│                      │ 3. Threshold: 0.1305                           │   │
│                      │ 4. Filter: Reject client 4 (1.234 > 0.1305)   │   │
│                      │ 5. Log statistics:                             │   │
│                      │    - TP: 1, FP: 0, TN: 3, FN: 0               │   │
│                      │    - Precision: 100%, Recall: 100%             │   │
│                      │                                                 │   │
│                      │ Time: ~13s (5% overhead)                       │   │
│                      └────────────────┬───────────────────────────────┘   │
│                                       │                                    │
│                                       ▼                                    │
│  Time: t=133-138s    ┌────────────────────────────────────────────────┐   │
│  (Aggregation)       │ SERVER: Aggregate (FedAvg on clean updates)    │   │
│                      ├────────────────────────────────────────────────┤   │
│                      │                                                 │   │
│                      │ θ_new = θ_old + (1/3)(Δθ₁ + Δθ₂ + Δθ₃)        │   │
│                      │                                                 │   │
│                      │ Time: ~5s                                       │   │
│                      └────────────────┬───────────────────────────────┘   │
│                                       │                                    │
│                                       ▼                                    │
│  Time: t=138-140s    ┌────────────────────────────────────────────────┐   │
│  (Evaluation)        │ SERVER: Evaluate global model on test set      │   │
│                      ├────────────────────────────────────────────────┤   │
│                      │                                                 │   │
│                      │ Test accuracy: 85.4%                            │   │
│                      │ Test loss: 0.37                                 │   │
│                      │                                                 │   │
│                      │ Time: ~2s                                       │   │
│                      └────────────────┬───────────────────────────────┘   │
│                                       │                                    │
│                                       ▼                                    │
│  Time: t=140s        ┌────────────────────────────────────────────────┐   │
│  (Round Complete)    │ ROUND r COMPLETE                                │   │
│                      │                                                 │   │
│                      │ Total time: 140s                                │   │
│                      │ Total communication: 164 KB                     │   │
│                      │ Accuracy: 85.4% (↑ from previous round)        │   │
│                      └─────────────────────────────────────────────────┘   │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

## Results Visualizations

### Accuracy Trajectory (All Conditions)

```
Accuracy (%)
 100 ┤
     │
  90 ┤                              ╭─────────  Baseline (No Attack)
     │                     ╭────────╯           88.9% final
  80 ┤            ╭────────╯            ╭─────  Defense (Attack + Defense)
     │   ╭────────╯              ╭──────╯       85.4% final
  70 ┤   │                  ╭────╯
     │   │             ╭────╯
  60 ┤   │        ╭────╯  ╮
     │   ╰────────╯        │
  50 ┤   │                 │╰╮
     │   │                 │  ╰╮
  40 ┤   │                 │    ╰╮
     │   │                 │      ╰╮
  30 ┤   │                 │        ╰╮
     │   │                 │          ╰╮
  20 ┤   │                 │            ╰╮   Attack (No Defense)
     │   │                 │              ╰╮  11.2% final (collapse!)
  10 ┼───╯                 ╰────────────────
     │
   0 ┼────────────────────────────────────────────────→
     0    1         2         3         4         5   Round

Legend:
  ─── Baseline    (all honest, no attack)
  ─── Attack      (25% malicious, no defense)
  ─── Defense     (25% malicious, with defense)

Key Observations:
1. Attack collapses model to random (10%)
2. Defense recovers to 96% of baseline
3. Baseline converges smoothly
4. Defense has slightly slower convergence (1 round delay)
```

### Update Norm Distribution

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                    UPDATE NORM DISTRIBUTION (Round 5)                        │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  Frequency                                                                   │
│      │                                                                       │
│   12 │   ███                                                                 │
│      │   ███                                                                 │
│   10 │   ███                                                                 │
│      │   ███                                                                 │
│    8 │   ███                                                                 │
│      │   ███                                                                 │
│    6 │   ███                                                                 │
│      │   ███                                                                 │
│    4 │   ███                                                                 │
│      │   ███                                                                 │
│    2 │   ███                                                                 │
│      │   ███                                                                 │
│    0 ├───███───────────────────────────────────────────────────→            │
│        0.04                                             1.18    Norm        │
│         ▲                                                ▲                   │
│         │                                                │                   │
│    Honest Clients                               Malicious Client            │
│    (n=3, mean=0.042)                           (n=1, norm=1.18)            │
│                                                                              │
│                        │←────── Threshold = 0.126 ──────→│                  │
│                              (median × 3.0 = 0.042 × 3.0)                   │
│                                                                              │
│  Statistical Summary:                                                        │
│  ┌─────────────────────────────────────────────────────────────────────┐  │
│  │  Honest Clients:                  Malicious Client:                  │  │
│  │  - Mean: 0.042                    - Norm: 1.182                      │  │
│  │  - Std:  0.003                    - Ratio: 28.1× honest mean         │  │
│  │  - Range: [0.038, 0.045]          - Clearly separable!               │  │
│  │                                                                       │  │
│  │  Detection:                                                           │  │
│  │  - Median: 0.042                                                      │  │
│  │  - Threshold: 0.126                                                   │  │
│  │  - Malicious > threshold? YES → REJECT ✓                             │  │
│  │  - Honest < threshold? YES → ACCEPT ✓                                │  │
│  └───────────────────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────────┘
```

### Confusion Matrix

```
┌─────────────────────────────────────────────────────────────────────────────┐
│               CONFUSION MATRIX (All Rounds Aggregated)                       │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│                              PREDICTED                                       │
│                     ┌───────────────┬──────────────┐                        │
│                     │   Malicious   │    Honest    │                        │
│        ┌────────────┼───────────────┼──────────────┤                        │
│        │            │               │              │                        │
│        │ Malicious  │      5        │      0       │  ← Recall: 5/5 = 100% │
│   A    │            │    (TP)       │    (FN)      │                        │
│   C    ├────────────┼───────────────┼──────────────┤                        │
│   T    │            │               │              │                        │
│   U    │  Honest    │      0        │      15      │  ← Spec: 15/15 = 100% │
│   A    │            │    (FP)       │    (TN)      │                        │
│   L    └────────────┼───────────────┼──────────────┤                        │
│                     │               │              │                        │
│                     │  Precision:   │              │                        │
│                     │  5/5 = 100%   │              │                        │
│                     └───────────────┴──────────────┘                        │
│                                                                              │
│  Performance Metrics:                                                        │
│  ┌──────────────────────────────────────────────────────────────────────┐  │
│  │  Accuracy:    (5 + 15) / 20 = 100.0%                                 │  │
│  │  Precision:   5 / (5 + 0)   = 100.0%  ✓ No false positives          │  │
│  │  Recall:      5 / (5 + 0)   = 100.0%  ✓ No false negatives          │  │
│  │  F1-Score:    2×1×1/(1+1)   = 100.0%  ✓ Perfect balance             │  │
│  │  Specificity: 15 / (15 + 0) = 100.0%  ✓ No honest rejected           │  │
│  └──────────────────────────────────────────────────────────────────────┘  │
│                                                                              │
│  Interpretation:                                                             │
│  • Perfect detection: All malicious clients caught                          │
│  • No collateral damage: No honest clients rejected                         │
│  • High separation: Norm-based filtering works excellently                  │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

### Performance Comparison

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                      PERFORMANCE METRICS COMPARISON                          │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │  ACCURACY (Higher is better)                                           │ │
│  ├────────────────────────────────────────────────────────────────────────┤ │
│  │                                                                         │ │
│  │  Baseline:  ████████████████████████████████████████████████ 88.9%    │ │
│  │                                                                         │ │
│  │  Defense:   ██████████████████████████████████████████████   85.4%    │ │
│  │                                                         (96% recovery)  │ │
│  │                                                                         │ │
│  │  Attack:    ███████                                      11.2%         │ │
│  │             (collapsed to random guessing)                             │ │
│  │                                                                         │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │  TRAINING TIME PER ROUND (Lower is better)                             │ │
│  ├────────────────────────────────────────────────────────────────────────┤ │
│  │                                                                         │ │
│  │  Baseline:  ████████████████████████████████████████████     245s     │ │
│  │                                                                         │ │
│  │  Attack:    ████████████████████████████████████████████     248s     │ │
│  │             (+1.2% overhead from attack computation)                   │ │
│  │                                                                         │ │
│  │  Defense:   █████████████████████████████████████████████    258s     │ │
│  │             (+5.3% overhead from defense filtering)                    │ │
│  │                                                                         │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  ┌────────────────────────────────────────────────────────────────────────┐ │
│  │  DETECTION PERFORMANCE (Defense only)                                  │ │
│  ├────────────────────────────────────────────────────────────────────────┤ │
│  │                                                                         │ │
│  │  Precision: ████████████████████████████████████████████████ 100%     │ │
│  │                                                                         │ │
│  │  Recall:    ████████████████████████████████████████████████ 100%     │ │
│  │                                                                         │ │
│  │  F1-Score:  ████████████████████████████████████████████████ 100%     │ │
│  │                                                                         │ │
│  └────────────────────────────────────────────────────────────────────────┘ │
│                                                                              │
│  Key Takeaways:                                                              │
│  • Defense recovers 96% of baseline accuracy (85.4% vs 88.9%)               │
│  • Minimal computational overhead (5.3% slower)                              │
│  • Perfect malicious client detection (100% precision & recall)              │
│  • Attack without defense completely collapses model (88.9% → 11.2%)         │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

**Last Updated**: November 2025  
**Version**: 1.0  
**Purpose**: Visual reference for research documentation  
**Total Diagrams**: 15+ comprehensive visualizations
